{% load static %}
<!doctype html>
<html lang="fa" dir="rtl" class="scroll-smooth">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ site_settings.brand_wordmark_fa|default:site_settings.site_name|default:'Accountinox' }}{% endblock %} | {{ site_settings.brand_wordmark_fa|default:site_settings.site_name|default:'Accountinox' }}</title>
    
    <!-- Meta/SEO -->
    <meta name="description" content="{% block meta_description %}{{ site_settings.site_description|default:'خرید امن اکانت و لایسنس دیجیتال با تحویل فوری' }}{% endblock %}">
    <meta name="robots" content="{% block meta_robots %}index, follow{% endblock %}">
    <meta name="theme-color" content="{{ site_settings.primary_color|default:'#1ABBC8' }}">
    
    <!-- Canonical -->
    <link rel="canonical" href="{% block canonical %}{{ site_base_url }}{{ request.path }}{% endblock %}">
    
    <!-- Open Graph -->
    {% block og_tags %}
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ site_settings.brand_wordmark_fa|default:site_settings.site_name|default:'Accountinox' }}">
    <meta property="og:title" content="{% block og_title %}{{ site_settings.site_name|default:'Accountinox' }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ site_settings.site_description|default:'خرید امن اکانت و لایسنس دیجیتال' }}{% endblock %}">
    <meta property="og:url" content="{{ site_base_url }}{{ request.path }}">
    <meta property="og:image" content="{% if site_settings.logo %}{{ site_settings.logo.url }}{% else %}{{ site_base_url }}{% static 'img/og-image.jpg' %}{% endif %}">
    {% endblock %}

    <!-- Fonts (Vazirmatn) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS (production build) -->
    <link href="{% static 'css/output.css' %}" rel="stylesheet">

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>

    {% block extra_head %}{% endblock %}
    
    {% block schema_jsonld %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "{{ site_settings.site_name|default:'Accountinox' }}",
      "url": "{{ site_base_url }}"
    }
    </script>
    {% endblock %}
</head>
<body class="bg-gray-50 text-slate-800 antialiased font-sans flex flex-col min-h-screen">

    {% include "partials/navbar.html" %}

    <main class="flex-grow w-full">
        {% if messages %}
        <div class="fixed top-24 start-1/2 transform -translate-x-1/2 z-[60] w-full max-w-md px-4 pointer-events-none">
            {% for message in messages %}
            <div class="pointer-events-auto mb-3 flex items-center w-full p-4 rounded-lg shadow-lg text-white text-sm font-medium
                {% if message.tags == 'debug' %}bg-gray-600{% elif message.tags == 'info' %}bg-secondary-500{% elif message.tags == 'success' %}bg-green-600{% elif message.tags == 'warning' %}bg-yellow-500{% elif message.tags == 'error' %}bg-red-600{% endif %}"
                x-data="{ show: true }" x-show="show" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-2" x-init="setTimeout(() => show = false, 5000)">
                <div class="flex-shrink-0 ms-1 me-3">
                    {% if message.tags == 'success' %}
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    {% elif message.tags == 'error' %}
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    {% else %}
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    {% endif %}
                </div>
                <div class="flex-grow">{{ message }}</div>
                <button @click="show = false" class="ms-auto w-5 h-5 opacity-70 hover:opacity-100 focus:outline-none">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}{% endblock %}
    </main>

    {% include "partials/footer.html" %}

    {% block extra_scripts %}{% endblock %}
</body>
</html>