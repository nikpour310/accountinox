{% extends "base.html" %}

{% block title %}تماس با ما | {{ block.super }}{% endblock %}
{% block meta_description %}راه‌های ارتباط سریع با تیم پشتیبانی {{ site_settings.site_name|default:'Accountinox' }} برای پیگیری سفارش و مشاوره خرید.{% endblock %}
{% block canonical %}<link rel="canonical" href="{{ site_base_url }}{% url 'core:contact' %}">{% endblock %}

{% block content %}
<div class="page-wrapper max-w-4xl">
  <nav class="mb-8 reveal" aria-label="breadcrumb">
    <div class="flex items-center gap-2 text-sm text-gray-400">
      <a href="{% url 'core:landing' %}" class="hover:text-primary-600 transition-colors">خانه</a>
      <svg class="w-3 h-3 rotate-180 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
      <span class="text-gray-600 font-medium">تماس با ما</span>
    </div>
  </nav>

  <div class="text-center mb-8 reveal">
    <span class="chip">ارتباط و پشتیبانی</span>
    <h1 class="section-title mt-4">تماس با ما</h1>
    <p class="section-subtitle mt-2 mx-auto">
      برای پیگیری سفارش، مشاوره پیش از خرید یا گزارش مشکل، از سریع‌ترین مسیرهای ارتباطی زیر استفاده کنید.
    </p>
  </div>

  <div class="card p-5 sm:p-6 reveal">
    <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
      <div>
        <h2 class="text-sm font-bold text-gray-900">مسیر پیشنهادی: چت آنلاین</h2>
        <p class="text-sm text-gray-500 mt-1">برای پاسخ سریع‌تر، گفت‌وگو را از چت پشتیبانی شروع کنید.</p>
      </div>
      <div class="flex flex-wrap gap-2">
        <a href="{% url 'support:chat' %}" class="btn btn-primary btn-sm">شروع چت پشتیبانی</a>
        {% if site_settings.telegram_admin_url %}
          <a href="{{ site_settings.telegram_admin_url }}" target="_blank" rel="noopener noreferrer" class="btn btn-secondary btn-sm">تلگرام پشتیبانی</a>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="grid gap-4 md:grid-cols-2 mt-6">
    <div class="card card-hover p-5 reveal">
      <div class="flex items-start justify-between gap-3">
        <div>
          <h3 class="text-base font-semibold text-gray-900">چت آنلاین</h3>
          <p class="text-sm text-gray-500 mt-1">ثبت تیکت و گفت‌وگو با تیم پشتیبانی داخل سایت.</p>
        </div>
        <span class="chip">پیشنهادی</span>
      </div>
      <a href="{% url 'support:chat' %}" class="btn btn-primary btn-sm mt-4">ورود به چت</a>
    </div>

    {% if site_settings.telegram_admin_url %}
    <div class="card card-hover p-5 reveal">
      <h3 class="text-base font-semibold text-gray-900">تلگرام پشتیبانی</h3>
      <p class="text-sm text-gray-500 mt-1">برای ارتباط مستقیم با ادمین از تلگرام استفاده کنید.</p>
      <a href="{{ site_settings.telegram_admin_url }}" target="_blank" rel="noopener noreferrer" class="btn btn-secondary btn-sm mt-4">ارتباط با ادمین</a>
    </div>
    {% endif %}

    {% if site_settings.telegram_channel_url %}
    <div class="card card-hover p-5 reveal">
      <h3 class="text-base font-semibold text-gray-900">کانال اطلاع‌رسانی</h3>
      <p class="text-sm text-gray-500 mt-1">اخبار سرویس‌ها و اطلاعیه‌های مهم را دنبال کنید.</p>
      <a href="{{ site_settings.telegram_channel_url }}" target="_blank" rel="noopener noreferrer" class="btn btn-ghost btn-sm mt-4">مشاهده کانال</a>
    </div>
    {% endif %}

    {% if site_settings.phone %}
    <div class="card card-hover p-5 reveal">
      <h3 class="text-base font-semibold text-gray-900">تماس تلفنی</h3>
      <p class="text-sm text-gray-500 mt-1"><span class="font-medium text-gray-700" dir="ltr">{{ site_settings.phone }}</span></p>
      <a href="tel:{{ site_settings.phone }}" class="btn btn-secondary btn-sm mt-4">تماس مستقیم</a>
    </div>
    {% endif %}

    {% if site_settings.email %}
    <div class="card card-hover p-5 reveal">
      <h3 class="text-base font-semibold text-gray-900">ایمیل</h3>
      <p class="text-sm text-gray-500 mt-1 break-all" dir="ltr">{{ site_settings.email }}</p>
      <a href="mailto:{{ site_settings.email }}" class="btn btn-secondary btn-sm mt-4">ارسال ایمیل</a>
    </div>
    {% endif %}

    {% if site_settings.instagram_url %}
    <div class="card card-hover p-5 reveal">
      <h3 class="text-base font-semibold text-gray-900">اینستاگرام</h3>
      <p class="text-sm text-gray-500 mt-1">برای اطلاع از محتوا و آپدیت‌ها ما را دنبال کنید.</p>
      <a href="{{ site_settings.instagram_url }}" target="_blank" rel="noopener noreferrer" class="btn btn-ghost btn-sm mt-4">مشاهده صفحه</a>
    </div>
    {% endif %}
  </div>

  {% if not site_settings.telegram_admin_url and not site_settings.telegram_channel_url and not site_settings.phone and not site_settings.email and not site_settings.instagram_url %}
  <div class="card p-5 sm:p-6 mt-6 reveal">
    <div class="alert alert-info">
      <svg class="w-5 h-5 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
      <p class="leading-7">در حال حاضر مسیر تماس دیگری تنظیم نشده است. لطفا از چت آنلاین برای ارتباط با پشتیبانی استفاده کنید.</p>
    </div>
  </div>
  {% endif %}

  <div class="card p-5 sm:p-6 mt-6 reveal">
    <h2 class="text-sm font-bold text-gray-900">قبل از ارتباط، این موارد را آماده کنید</h2>
    <div class="divider my-4"></div>
    <ul class="space-y-2 text-sm text-gray-600 leading-7">
      <li>شماره سفارش (در صورت پیگیری خرید)</li>
      <li>شرح دقیق مشکل یا سوال</li>
      <li>در صورت نیاز، تصویر خطا یا اسکرین‌شات</li>
      <li>ایمیل یا شماره موبایلی که با آن خرید انجام شده</li>
    </ul>
  </div>

  {% if contact_faqs %}
  <div class="card p-5 sm:p-6 mt-6 reveal" x-data="{ openFaq: 0 }">
    <h2 class="text-sm font-bold text-gray-900">سوالات پرتکرار قبل از تماس</h2>
    <p class="text-sm text-gray-500 mt-1">شاید پاسخ سوال شما همین‌جا باشد.</p>
    <div class="divider my-4"></div>
    <div class="space-y-3">
      {% for faq in contact_faqs %}
      <div class="rounded-xl border border-gray-100 overflow-hidden">
        <button type="button"
                @click="openFaq = openFaq === {{ forloop.counter }} ? 0 : {{ forloop.counter }}"
                class="w-full flex items-center justify-between gap-3 px-4 py-3 text-right bg-white hover:bg-gray-50 transition-colors">
          <span class="text-sm font-semibold text-gray-900">{{ faq.question }}</span>
          <svg class="w-4 h-4 text-gray-400 transition-transform"
               :class="{ 'rotate-180': openFaq === {{ forloop.counter }} }"
               fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div x-show="openFaq === {{ forloop.counter }}"
             x-transition
             class="px-4 pb-4 pt-1 text-sm text-gray-600 leading-7">
          {{ faq.answer|linebreaksbr }}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
