{% extends "admin/base_site.html" %}
{% load i18n static log %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static "admin/css/dashboard.css" %}">
{% endblock %}

{% block coltype %}colMS{% endblock %}
{% block bodyclass %}{{ block.super }} dashboard{% endblock %}
{% block nav-breadcrumbs %}{% endblock %}
{% block nav-sidebar %}{% endblock %}

{% block content %}
<div class="dashboard-grid">
<div class="dashboard-main">

<section class="admin-overview-card admin-overview-card--gradient">
  <div class="admin-overview-icon">ğŸ‘‹</div>
  <div>
    <h2>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¹Ù…Ù„ÛŒØ§Øª</h2>
    <p>Workspace Ù…Ù†Ø§Ø³Ø¨ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ØªØ§ Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø¯Ø± Û± ØªØ§ Û² Ú©Ù„ÛŒÚ© Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.</p>
  </div>
</section>

<section class="admin-role-priority">
  <div class="admin-section-head">
    <h2>âš¡ Ø§Ù‚Ø¯Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ Ø´Ù…Ø§</h2>
    <p>Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­ Ø¯Ø³ØªØ±Ø³ÛŒ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
  </div>
  <div class="admin-workspace-actions admin-role-priority-links">
    {% if admin_primary_role == 'support' %}
      {% if perms.support.view_chatsession %}
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1&has_unread=yes">ØµÙ†Ø¯ÙˆÙ‚ Ø®ÙˆØ§Ù†Ø¯Ù‡â€ŒÙ†Ø´Ø¯Ù‡</a>
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1">Ø¬Ù„Ø³Ø§Øª ÙØ¹Ø§Ù„</a>
      {% endif %}
      {% if perms.support.view_supportcontact %}
        <a href="{% url 'admin:support_supportcontact_changelist' %}">Ù…Ø®Ø§Ø·Ø¨ÛŒÙ† Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a>
      {% endif %}
      {% if perms.support.view_supportrating %}
        <a href="{% url 'admin:support_supportrating_changelist' %}">Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§</a>
      {% endif %}
    {% elif admin_primary_role == 'crm' %}
      {% if perms.support.view_supportcontact %}
        <a href="{% url 'admin:support_supportcontact_changelist' %}">Ù„ÛŒØ³Øª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</a>
      {% endif %}
      {% if perms.support.can_export_support_contacts %}
        <a href="{% url 'admin:support_supportcontact_export_filtered' %}">Ø®Ø±ÙˆØ¬ÛŒ ÙÛŒÙ„ØªØ±Ø´Ø¯Ù‡</a>
      {% endif %}
      {% if perms.support.view_chatsession %}
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1&assigned_to__isnull=True">Ø¬Ù„Ø³Ø§Øª Ø¨Ø¯ÙˆÙ† Ø§Ù¾Ø±Ø§ØªÙˆØ±</a>
      {% endif %}
    {% elif admin_primary_role == 'content' %}
      {% if perms.blog.view_post %}
        <a href="{% url 'admin:blog_post_changelist' %}?published__exact=0">Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³â€ŒÙ‡Ø§</a>
        <a href="{% url 'admin:blog_post_changelist' %}">Ù‡Ù…Ù‡ Ù¾Ø³Øªâ€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.blog.add_post %}
        <a href="{% url 'admin:blog_post_add' %}">Ù¾Ø³Øª Ø¬Ø¯ÛŒØ¯</a>
      {% endif %}
    {% else %}
      {% if perms.support.view_chatsession %}
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1&has_unread=yes">ØµÙ†Ø¯ÙˆÙ‚ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</a>
      {% endif %}
      {% if perms.shop.view_order %}
        <a href="{% url 'admin:shop_order_changelist' %}?paid__exact=0">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</a>
      {% endif %}
      {% if perms.blog.view_post %}
        <a href="{% url 'admin:blog_post_changelist' %}?published__exact=0">Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³ Ø¨Ù„Ø§Ú¯</a>
      {% endif %}
    {% endif %}
  </div>
</section>

<section
  class="admin-workspace-switcher"
  data-workspace-switcher
  data-default-workspace="{% if admin_primary_role == 'content' %}blog{% elif admin_primary_role == 'crm' or admin_primary_role == 'support' %}support{% elif admin_primary_role == 'owner' %}support{% else %}orders{% endif %}"
>
  <div class="admin-workspace-tabs" role="tablist" aria-label="Ø§Ù†ØªØ®Ø§Ø¨ ÙØ¶Ø§ÛŒ Ú©Ø§Ø±ÛŒ">
    <button type="button" class="admin-workspace-tab is-active" data-workspace-tab="support" role="tab" aria-selected="true">ğŸ’¬ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</button>
    <button type="button" class="admin-workspace-tab" data-workspace-tab="orders" role="tab" aria-selected="false">ğŸ›’ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</button>
    <button type="button" class="admin-workspace-tab" data-workspace-tab="products" role="tab" aria-selected="false">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
    <button type="button" class="admin-workspace-tab" data-workspace-tab="blog" role="tab" aria-selected="false">âœï¸ Ø¨Ù„Ø§Ú¯</button>
    <button type="button" class="admin-workspace-tab" data-workspace-tab="content" role="tab" aria-selected="false">ğŸ¨ Ù…Ø­ØªÙˆØ§ÛŒ Ø³Ø§ÛŒØª</button>
    {% if admin_primary_role == 'owner' %}
    <button type="button" class="admin-workspace-tab" data-workspace-tab="settings" role="tab" aria-selected="false">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
    {% endif %}
  </div>

  <article class="admin-workspace-panel is-active" data-workspace-panel="support" role="tabpanel">
    <div class="admin-workspace-actions">
      {% if perms.support.view_chatsession %}
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1&has_unread=yes">ğŸ“¥ ØµÙ†Ø¯ÙˆÙ‚ Ø®ÙˆØ§Ù†Ø¯Ù‡â€ŒÙ†Ø´Ø¯Ù‡</a>
        <a href="{% url 'admin:support_chatsession_changelist' %}?is_active__exact=1&assigned_to__id__exact={{ user.id }}">ğŸ‘¤ Ú¯ÙØªÚ¯ÙˆÙ‡Ø§ÛŒ Ù…Ù†</a>
        <a href="{% url 'admin:support_chatsession_changelist' %}">ğŸ“‹ Ù‡Ù…Ù‡ Ú¯ÙØªÚ¯ÙˆÙ‡Ø§</a>
      {% endif %}
      {% if perms.support.view_supportcontact %}
        <a href="{% url 'admin:support_supportcontact_changelist' %}">ğŸ“‡ Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†</a>
      {% endif %}
      {% if perms.support.view_supportrating %}
        <a href="{% url 'admin:support_supportrating_changelist' %}">â­ Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      {% if perms.support.view_chatsession %}
        <div><span>Ø¬Ù„Ø³Ø§Øª ÙØ¹Ø§Ù„</span><strong>{{ admin_dashboard_stats.support_active_sessions|default:"-" }}</strong></div>
        <div><span>Ù¾ÛŒØ§Ù… Ø®ÙˆØ§Ù†Ø¯Ù‡â€ŒÙ†Ø´Ø¯Ù‡</span><strong>{{ admin_dashboard_stats.support_unread_messages|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.support.view_supportrating %}
        <div><span>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø² Û³Û° Ø±ÙˆØ²</span><strong>{{ admin_dashboard_stats.support_avg_rating_30d|default:"-" }}</strong></div>
      {% endif %}
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="support"></div>
  </article>

  <article class="admin-workspace-panel" data-workspace-panel="orders" role="tabpanel" hidden>
    <div class="admin-workspace-actions">
      {% if perms.shop.view_order %}
        <a href="{% url 'admin:shop_order_changelist' %}?paid__exact=0">â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø±Ø¯Ø§Ø®Øª</a>
        <a href="{% url 'admin:shop_order_changelist' %}?status__exact=pending_review">ğŸ” Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ</a>
        <a href="{% url 'admin:shop_order_changelist' %}">ğŸ“‹ Ù‡Ù…Ù‡ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.shop.view_transactionlog %}
        <a href="{% url 'admin:shop_transactionlog_changelist' %}?success__exact=0">âŒ ØªØ±Ø§Ú©Ù†Ø´ Ù†Ø§Ù…ÙˆÙÙ‚</a>
        <a href="{% url 'admin:shop_transactionlog_changelist' %}">ğŸ’³ Ù‡Ù…Ù‡ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      {% if perms.shop.view_order %}
        <div><span>Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø±Ø¯Ø§Ø®Øª</span><strong>{{ admin_dashboard_stats.shop_pending_orders|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.shop.view_transactionlog %}
        <div><span>Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø§Ù…ÙˆÙÙ‚</span><strong>{{ admin_dashboard_stats.shop_failed_payments|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.shop.view_order %}
        <div><span>Ú©Ù„ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</span><strong>{{ admin_dashboard_stats.shop_total_orders|default:"-" }}</strong></div>
      {% endif %}
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="orders"></div>
  </article>

  <article class="admin-workspace-panel" data-workspace-panel="products" role="tabpanel" hidden>
    <div class="admin-workspace-actions">
      {% if perms.shop.view_product %}
        <a href="{% url 'admin:shop_product_changelist' %}">ğŸ“¦ Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
      {% endif %}
      {% if perms.shop.add_product %}
        <a href="{% url 'admin:shop_product_add' %}">â• Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„</a>
      {% endif %}
      {% if perms.shop.view_service %}
        <a href="{% url 'admin:shop_service_changelist' %}">ğŸ·ï¸ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.shop.view_category %}
        <a href="{% url 'admin:shop_category_changelist' %}">ğŸ“‚ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.shop.view_accountitem %}
        <a href="{% url 'admin:shop_accountitem_changelist' %}">ğŸ”‘ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ú©Ø§Ù†Øª</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      {% if perms.shop.view_product %}
        <div><span>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­ØµÙˆÙ„Ø§Øª</span><strong>{{ admin_dashboard_stats.shop_products_count|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.shop.view_accountitem %}
        <div><span>Ø¢ÛŒØªÙ… Ø¢Ø²Ø§Ø¯</span><strong>{{ admin_dashboard_stats.shop_free_items|default:"-" }}</strong></div>
      {% endif %}
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="products"></div>
  </article>

  <article class="admin-workspace-panel" data-workspace-panel="blog" role="tabpanel" hidden>
    <div class="admin-workspace-actions">
      {% if perms.blog.view_post %}
        <a href="{% url 'admin:blog_post_changelist' %}?published__exact=0">ğŸ“ Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³â€ŒÙ‡Ø§</a>
        <a href="{% url 'admin:blog_post_changelist' %}">ğŸ“‹ Ù‡Ù…Ù‡ Ù¾Ø³Øªâ€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.blog.add_post %}
        <a href="{% url 'admin:blog_post_add' %}">â• Ù¾Ø³Øª Ø¬Ø¯ÛŒØ¯</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      {% if perms.blog.view_post %}
        <div><span>Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³</span><strong>{{ admin_dashboard_stats.blog_draft_posts|default:"-" }}</strong></div>
        <div><span>Ú©Ù„ Ù¾Ø³Øªâ€ŒÙ‡Ø§</span><strong>{{ admin_dashboard_stats.blog_total_posts|default:"-" }}</strong></div>
      {% endif %}
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="blog"></div>
  </article>

  <article class="admin-workspace-panel" data-workspace-panel="content" role="tabpanel" hidden>
    <div class="admin-workspace-actions">
      {% if perms.core.view_herobanner %}
        <a href="{% url 'admin:core_herobanner_changelist' %}">ğŸ–¼ï¸ Ø¨Ù†Ø±Ù‡Ø§ÛŒ Ø§Ø³Ù„Ø§ÛŒØ¯Ø±</a>
      {% endif %}
      {% if perms.core.view_featurecard %}
        <a href="{% url 'admin:core_featurecard_changelist' %}">ğŸ’ Ú©Ø§Ø±Øª ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.core.view_truststat %}
        <a href="{% url 'admin:core_truststat_changelist' %}">ğŸ“Š Ø¢Ù…Ø§Ø± Ø§Ø¹ØªÙ…Ø§Ø¯</a>
      {% endif %}
      {% if perms.core.view_footerlink %}
        <a href="{% url 'admin:core_footerlink_changelist' %}">ğŸ”— Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ ÙÙˆØªØ±</a>
      {% endif %}
      {% if perms.core.view_globalfaq %}
        <a href="{% url 'admin:core_globalfaq_changelist' %}">â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      {% if perms.core.view_herobanner %}
        <div><span>Ø¨Ù†Ø±Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„</span><strong>{{ admin_dashboard_stats.core_active_banners|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.core.view_featurecard %}
        <div><span>Ú©Ø§Ø±Øª ÙˆÛŒÚ˜Ú¯ÛŒ</span><strong>{{ admin_dashboard_stats.core_feature_cards|default:"-" }}</strong></div>
      {% endif %}
      {% if perms.core.view_footerlink %}
        <div><span>Ù„ÛŒÙ†Ú© ÙÙˆØªØ±</span><strong>{{ admin_dashboard_stats.core_footer_links|default:"-" }}</strong></div>
      {% endif %}
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="content"></div>
  </article>

  {% if admin_primary_role == 'owner' %}
  <article class="admin-workspace-panel" data-workspace-panel="settings" role="tabpanel" hidden>
    <div class="admin-workspace-actions">
      {% if perms.core.view_sitesettings %}
        <a href="{% url 'admin:core_sitesettings_changelist' %}">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§ÛŒØª</a>
      {% endif %}
      {% if perms.auth.view_user %}
        <a href="{% url 'admin:auth_user_changelist' %}">ğŸ‘¥ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</a>
      {% endif %}
      {% if perms.auth.view_group %}
        <a href="{% url 'admin:auth_group_changelist' %}">ğŸ” Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.accounts.view_profile %}
        <a href="{% url 'admin:accounts_profile_changelist' %}">ğŸ“Œ Ù¾Ø±ÙˆÙØ§ÛŒÙ„â€ŒÙ‡Ø§</a>
      {% endif %}
      {% if perms.accounts.view_phoneotp %}
        <a href="{% url 'admin:accounts_phoneotp_changelist' %}">ğŸ“² Ú©Ø¯Ù‡Ø§ÛŒ OTP</a>
      {% endif %}
    </div>
    <div class="admin-workspace-counters">
      <div><span>Ú©Ù„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</span><strong>{{ admin_dashboard_stats.accounts_total_users|default:"-" }}</strong></div>
      <div><span>ÙØ¹Ø§Ù„ Û³Û° Ø±ÙˆØ²</span><strong>{{ admin_dashboard_stats.accounts_active_users_30d|default:"-" }}</strong></div>
    </div>
    <div class="admin-pinned-views" data-pinned-views data-pinned-scope="settings"></div>
  </article>
  {% endif %}
</section>

<section class="admin-favorites-panel" aria-label="Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø§Ø±">
  <div class="admin-section-head">
    <h2>Ø§Ø¯Ø§Ù…Ù‡ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† ØµÙØ­Ø§Øª</h2>
    <p>Ø¢Ø®Ø±ÛŒÙ† Ûµ ØµÙØ­Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø¯Ø± Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø² Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</p>
  </div>
  <div class="admin-recent-list" data-recent-admin-list aria-live="polite"></div>
</section>

<section class="admin-favorites-panel" aria-label="Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§">
  <div class="admin-section-head">
    <h2>Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h2>
    <p>Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ Ø³ØªØ§Ø±Ù‡â€ŒØ¯Ø§Ø± Ú©Ù†ÛŒØ¯ ØªØ§ Ù‡Ù…ÛŒØ´Ù‡ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨Ø§Ø´Ù†Ø¯.</p>
  </div>
  <div class="admin-favorites-list" data-favorites-list aria-live="polite"></div>
  <noscript>
    <ul class="admin-favorites-noscript">
      {% for item in admin_default_favorites %}
        <li><a href="{{ item.url }}">{{ item.label }}</a></li>
      {% endfor %}
    </ul>
  </noscript>
</section>

<div id="content-main" class="app-list">
  {% include "admin/app_list.html" with app_list=app_list show_changelinks=True %}
</div>

</div>{# end .dashboard-main #}

<aside class="dashboard-sidebar">
  <div class="module admin-recent-module" id="recent-actions-module">
    <h2>ğŸ“‹ {% translate 'Recent actions' %}</h2>
    <h3>{% translate 'My actions' %}</h3>
    {% get_admin_log 10 as admin_log for_user user %}
    {% if not admin_log %}
      <p>{% translate 'None available' %}</p>
    {% else %}
      <ul class="actionlist">
        {% for entry in admin_log %}
          <li class="{% if entry.is_addition %}addlink{% endif %}{% if entry.is_change %}changelink{% endif %}{% if entry.is_deletion %}deletelink{% endif %}">
            <span class="visually-hidden">
              {% if entry.is_addition %}{% translate 'Added:' %}
              {% elif entry.is_change %}{% translate 'Changed:' %}
              {% elif entry.is_deletion %}{% translate 'Deleted:' %}{% endif %}
            </span>
            {% if entry.is_deletion or not entry.get_admin_url %}
              {{ entry.object_repr }}
            {% else %}
              <a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a>
            {% endif %}
            <br>
            {% if entry.content_type %}
              <span class="mini quiet">{% filter capfirst %}{{ entry.content_type.name }}{% endfilter %}</span>
            {% else %}
              <span class="mini quiet">{% translate 'Unknown content' %}</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
</aside>
</div>{# end .dashboard-grid #}
{% endblock %}

{% block sidebar %}{% endblock %}
